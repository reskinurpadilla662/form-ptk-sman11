<!DOCTYPE html>
<html>
<head>
    <title>Form PTK SMAN 11 Luwu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial; max-width: 400px; margin: 50px auto; padding: 20px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { background: #2196F3; color: white; padding: 12px; width: 100%; border: none; border-radius: 4px; font-size: 16px; }
        button:hover { background: #1976D2; }
        .status { margin-top: 20px; padding: 10px; border-radius: 4px; display: none; }
        .success { background: #4CAF50; color: white; }
        .error { background: #f44336; color: white; }
    </style>
</head>
<body>
    <h2>Form Data PTK SMAN 11 Luwu</h2>
    <p>Isi data Anda untuk buku induk digital Kepala Sekolah</p>
    
    <input type="text" id="nama" placeholder="Nama Lengkap" required>
    <input type="text" id="nip" placeholder="NIP / NUPTK" required>
    <input type="text" id="jabatan" placeholder="Jabatan" required>
    <input type="text" id="unit" placeholder="Unit Kerja / Mapel" required>
    <input type="text" id="alamat" placeholder="Alamat">
    <input type="tel" id="hp" placeholder="No. HP">
    <input type="email" id="email" placeholder="Email">
    
    <button onclick="kirimData()">Kirim Data</button>
    <div id="status" class="status"></div>

    <script>
        // GANTI dengan URL Realtime Database kamu (sampai .app/ )
        const DATABASE_URL = "https://ptk-sman11-luwu-default-rtdb.asia-southeast1.firebasedatabase.app/";

        function kirimData() {
            const nama    = document.getElementById('nama').value.trim();
            const nip     = document.getElementById('nip').value.trim();
            const jabatan = document.getElementById('jabatan').value.trim();
            const unit    = document.getElementById('unit').value.trim();
            const alamat  = document.getElementById('alamat').value.trim();
            const hp      = document.getElementById('hp').value.trim();
            const email   = document.getElementById('email').value.trim();
            
            if (!nama || !nip || !jabatan || !unit) {
                tampilkanStatus("Nama, NIP, Jabatan, dan Unit Kerja/Mapel wajib diisi!", "error");
                return;
            }
            
            const data = {
                nama: nama,
                nip: nip,
                jabatan: jabatan,
                unit_kerja_mapel: unit,
                alamat: alamat,
                no_hp: hp,
                email: email,
                timestamp: new Date().toISOString()
            };
            
            // Simpan di path: ptk_sman11luwu/pendidik/[NIP]
            const key = nip.replace(/[^a-zA-Z0-9]/g, "_");
            fetch(`${DATABASE_URL}ptk_sman11luwu/pendidik/${key}.json`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            })
            .then(r => r.json())
            .then(() => {
                tampilkanStatus("Data berhasil dikirim ke buku induk Kepsek.", "success");
                document.querySelectorAll("input").forEach(i => i.value = "");
            })
            .catch(err => {
                tampilkanStatus("Gagal kirim data: " + err.message, "error");
            });
        }
        
        function tampilkanStatus(pesan, tipe) {
            const status = document.getElementById("status");
            status.textContent = pesan;
            status.className = `status ${tipe}`;
            status.style.display = "block";
            setTimeout(() => status.style.display = "none", 5000);
        }
    </script>
</body>
</html>
